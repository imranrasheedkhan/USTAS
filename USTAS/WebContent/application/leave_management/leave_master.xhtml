<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
</h:head>
<h:body>
	<ui:composition>

		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">Leave Creation</font>
			</legend>
			<table id="shift_Creation" class="table" cellpadding="10"
				style="width: 90%" align="center">
				<tbody>
					<tr style="width: 50%">
						<td style="width: 100px"><h:outputText value="Leave Type:" /></td>
						<td style="width: 50px"><h:selectOneMenu id="leaveType" required="true" requiredMessage="Please Select"
								value="#{leaveMasterMB.model.leaveInfo.leaveType}">
								<f:selectItem itemLabel="Sick Leave" itemValue="Sick Leave"></f:selectItem>
								<f:selectItem itemLabel="Casual Leave" itemValue="Casual Leave"></f:selectItem>
								<f:selectItem itemLabel="Emergency Leave" itemValue="Emergency Leave"></f:selectItem>
								<f:selectItem itemLabel="Maternity Leave" itemValue="Maternity Leave"></f:selectItem>
								<f:selectItem itemLabel="Vacation Leave" itemValue="Vacation Leave"></f:selectItem>
								<f:selectItem itemLabel="Leave Without Pay" itemValue="Leave Without Pay"></f:selectItem>
							</h:selectOneMenu></td>
							<td><rich:message for="leaveType"></rich:message></td>
					</tr >
					<tr  style="width: 50%">
						<td style="width: 100px"><h:outputText value="Short Name:"/>
						</td>
						<td style="width: 50px"><h:inputText maxlength="10" required="true" requiredMessage="Please Enter Short Name" id="short_name" styleClass="inputText" value="#{leaveMasterMB.model.leaveInfo.shortName}">
						</h:inputText></td>
						<td><rich:message for="short_name"></rich:message></td>
					</tr>
					<tr  style="width: 50%">
						<td style="width: 100px"><h:outputText
								value="Leave Description:" /></td>
						<td style="width: 50px"><h:inputTextarea onkeyup="maxTextAreaCharacter(this);" styleClass="inputText"  required="true" requiredMessage="Please Enter Description"
								value="#{leaveMasterMB.model.leaveInfo.desc}" rows="2"
								cols="40" id="leave_desc" /></td>  
						<td><rich:message for="leave_desc"></rich:message></td>
					</tr>
					<tr  style="width: 50%">
						<td style="width: 100px"><h:outputText value="CF Allowed:" /></td>
						<td width="10%"><h:selectBooleanCheckbox id="caryForward"
								value="#{leaveMasterMB.model.leaveInfo.cfAllowed}" /></td>
					</tr>
					<tr  style="width: 50%"> 
						<td style="width: 100px"><h:outputText value="IS Active:" /></td>
						<td width="10%"><h:selectBooleanCheckbox id="isActive"
								value="#{leaveMasterMB.model.leaveInfo.active}" /></td>
					</tr>
				</tbody>
			</table>
		</fieldset>
	          <div style="width:100%" align="right">
				

	           <h:button  value="Clear" style="Width: 70px;height:30px"/>
	             &nbsp;
				<a4j:commandButton execute="@form" render="@form" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();" styleClass="addButton" value="Add" actionListener="#{leaveMasterMB.addLeaveInfo}"
				 style="Width:70px;height:30px" ></a4j:commandButton>
				 &nbsp;
				<a4j:commandButton execute="@form" render="@form" onclick="disableAdd();" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();" value="Update" styleClass="updateButton"  actionListener="#{leaveMasterMB.updateLeaveInfo}" 
				style="Width:70px;height:30px">
				</a4j:commandButton>
		
			  
			</div>
		<fieldset class="fieldset">
     	   <legend class="legend">
		   		<font color="orange" size="4">Leave Details</font>
	    </legend>
	   		  <table id="leave_Creation" class="table" cellpadding="10"
    style="width: 45%" align="center">
    <tr>
     <td>Leave Type:</td>
      <td><h:inputText value="#{leaveMasterMB.model.leaveType}" styleClass="inputText" id="leave_type"/></td>
    
    <td>
     <a4j:commandButton render="table" value="Search" actionListener="#{leaveMasterMB.selectLeaveList}"  execute="leave_type" 
		id="btnSearch" oncomplete="navToLeaveMaster();"  ></a4j:commandButton>
     </td> 
    </tr>
    </table>  
       
    
       <div align="left" id="leaveDetail" style=" visibility:visible; float:left;right:50px;top:200px;height:100%; width:600px; margin-left:20px;">	 
			   
				
				
				<rich:dataTable value="#{leaveMasterMB.model.leaveList}" var="record" id="table"
					style="width:120%;height:100%;text-align:center"
					styleClass="searchTable" rows="5" headerClass="searchTableHeader"
					onrowmousemove="this.style.backgroundColor='#FFEBDA'"
					onrowmouseout="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
	   				rowClasses="odd-row,even-row">
				  					
				   <rich:column width="20%" >
						<f:facet name="header">
							<h:outputText value="Leave Type"></h:outputText>
						</f:facet>
						    <h:outputText value="#{record.leaveType}"></h:outputText>
					</rich:column>
					  <rich:column width="20%" >
						<f:facet name="header">
							<h:outputText value="Short Name"></h:outputText>
						</f:facet>
						    <h:outputText value="#{record.shortName}"></h:outputText>
					</rich:column>
					<rich:column width="30%">
						<f:facet name="header">
							<h:outputText value="Description"></h:outputText>
						</f:facet>
						<h:outputText value="#{record.desc}"></h:outputText>
					</rich:column>

					<rich:column width="10%">
						<f:facet name="header">
							<h:outputText value="Carry Forward"></h:outputText>
						</f:facet>
						<h:outputText value="#{record.cfAllowed ? 'Yes' : 'No'}"></h:outputText>
					</rich:column>
					 <rich:column width="20%">
       					<f:facet name="header">
       						<h:outputText value="Action"/> 
       					</f:facet>
       					<a4j:commandLink onclick="disableUpdate();" action="#{leaveMasterMB.selectLeaveUpdate}" execute="@this" render="leaveType,short_name,leave_desc,caryForward,isActive">
       					 <h:graphicImage value="/resources/images/editrecord.gif" />
       					      <f:setPropertyActionListener target="#{leaveMasterMB.model.leaveInfo}" value="#{record}"></f:setPropertyActionListener>
       					 </a4j:commandLink>
       				 </rich:column>
					    
				</rich:dataTable>

              </div>
			</fieldset>
			<script>
               var navToLeaveMaster=  function() {
        
               document.getElementById('leaveDetail').style.visibility="visible";
        
                   };
                   
                   
    
           </script>
			
			
		 <br/>
		 <br/>
		  <br/>
		 <br/>
             <script>
		           
		             $( document ).ready(function() {
                           $(".updateButton").prop('disabled', true); 
                         });
		                   function disableUpdate(){
			             
			                 $(".addButton").prop('disabled', true);
			                 $(".updateButton").prop('disabled', false);
		                   }
			                  function disableAdd(){
						      $(".addButton").prop('disabled', false);
				              $(".updateButton").prop('disabled', true); 
		                 }
		</script> 
	</ui:composition>
</h:body>

</html>