<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>
   
<h:body>
	<ui:composition>  
		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">Search Leave Application</font>
			</legend>
			<table id="leave_apply" class="table" cellpadding="10"
				style="width: 45%" align="center">
				<tr>
				<td>Employee No:</td>
				<td><h:inputText value="#{leaveApplicationMB.model.empNo}" styleClass="inputText" id="emp_name"/></td>
				
				<td>
				 <a4j:commandButton render="table" value="Search" actionListener="#{leaveApplicationMB.selectLeaveApplyList}"  execute="emp_name"  id="btnSearch"  oncomplete="navToLeave();" ></a4j:commandButton>
				 </td> 
				</tr>
			 </table>  
	  		  <div align="right" id="leaveApprove" style="visibility:hidden; float:left;right:50px;top:200px;height:100%; width:700px; margin-left:20px;">
			    <rich:dataTable value="#{leaveApplicationMB.model.leaveApplyList}" 
					var="leaveApply" id="table"  rowKeyVar="rowNo"  
					style="width:100%;height:100%;text-align:center" 
					styleClass="searchTable" rows="5" headerClass="searchTableHeader"
					onrowmousemove="this.style.backgroundColor='#FFEBDA'"
					onrowmouseout="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
					rowClasses="odd-row,even-row">    
					<rich:column width="15%">     
						<f:facet name="header">
						<h:outputText value="Employee No"></h:outputText>   
						</f:facet>
						<h:outputText value="#{leaveApply.empInfo.empNo}"></h:outputText>
						</rich:column>
						 <rich:column width="20%">
						 <f:facet name="header">   
						<h:outputText value="Name"></h:outputText>
						</f:facet>
						<h:outputText value="#{leaveApply.empInfo.firstName} #{leaveApply.empInfo.lastName}"></h:outputText>  
					    </rich:column>
					    <rich:column width="15%">
						 <f:facet name="header">
						  <h:outputText value="Apply Date"></h:outputText>
						 </f:facet>
						<h:outputText value="#{leaveApply.applicationDate}">
						 <f:convertDateTime pattern="yyy-MM-dd"></f:convertDateTime>
						 
						</h:outputText>
					   </rich:column>
					   
					    <rich:column width="15%">
						 <f:facet name="header">
						  <h:outputText value="From date"></h:outputText>
						 </f:facet>
						  <h:outputText value="#{leaveApply.fromDate}">
						   	 <f:convertDateTime pattern="yyy-MM-dd"></f:convertDateTime>
						  </h:outputText>
					    </rich:column>
					     <rich:column width="15%">
						 <f:facet name="header">
						   <h:outputText value="To Date"></h:outputText>
						 </f:facet>
						<h:outputText value="#{leaveApply.toDate}">
						 	 <f:convertDateTime pattern="yyy-MM-dd"></f:convertDateTime>
						</h:outputText>
					</rich:column>
					  <rich:column width="15%">
					   <f:facet name="header">
						   <h:outputText value="Days"></h:outputText>
						 </f:facet>
						<h:outputText value="#{leaveApply.noOfDays}"></h:outputText>
					</rich:column>
					   <rich:column width="15%">
					   <f:facet name="header">
						   <h:outputText value="Approve"></h:outputText>
						 </f:facet>
						<h:outputText value="#{leaveApply.leaveStatus ? 'Yes' : 'No'}"></h:outputText>
					</rich:column>   
					 <rich:column width="15%">
						 <f:facet name="header">
						   <h:outputText value="Action"></h:outputText>   
						 </f:facet>
					  <a4j:commandLink   action="#{leaveApplicationMB.selectLeave}"  rendered="#{!leaveApply.leaveStatus}"  execute="@this" oncomplete="navToLeaveApplicationDetail();" id="btn_approve" >
                             <f:setPropertyActionListener target="#{leaveApplicationMB.model.leaveApplication}" value="#{leaveApply}"></f:setPropertyActionListener>
                            <h:graphicImage      value="/resources/images/editrecord.gif"/>
                      </a4j:commandLink>
					</rich:column>
				
				  
				 </rich:dataTable>
			  
			  </div>
				</fieldset>
				
				<script>
				   var navToLeave=  function() {
					   
					    document.getElementById('leaveApprove').style.visibility="visible";
					   
	                  };
	                  
	                  var navToLeaveApplicationDetail = function() {
	    					
	   					 changePage('/application/leave_management/leave_application.xhtml');
	   				
	   					};     
				
				</script>
				</ui:composition>
		  </h:body>
	    </html>