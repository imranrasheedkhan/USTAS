<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>

<h:body>
	<ui:composition>

		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">Holiday Creation</font>
			</legend>
            
			<table id="Holiday_master" class="table" cellpadding="10"
				style="width: 75%" align="center">
				<tbody>


					<tr >
						<td style="width: 100px"><h:outputText value="Holiday Name :" /></td>
						<td style="width: 50px"><h:inputText styleClass="inputText" maxlength="50" id="txt_name" required="true" requiredMessage="Please Enter Name" 
							value="#{holidayMasterMB.model.holidayInfo.name}"
								/></td>
						     <td style="width: 50px"><rich:message for="txt_name"></rich:message></td>

					</tr>
					<tr>
						<td style="width: 100px"><h:outputText value="Description :" /></td>
						<td style="width: 50px"><h:inputText styleClass="inputText" maxlength="100" id="description" required="true" requiredMessage="Please Enter Description"
								value="#{holidayMasterMB.model.holidayInfo.holidayDesc}"
								/></td>
                         <td style="width: 50px"><rich:message for="description"></rich:message></td>
					</tr>

					<tr>
						<td style="width: 100px"><h:outputText value="Holiday Type :" /></td>
						<td style="width: 50px"><h:inputText styleClass="inputText" maxlength="50" id="txt_type" required="true" requiredMessage="Please Enter Type"
								value="#{holidayMasterMB.model.holidayInfo.holidayType}"
								/></td>
                          <td style="width: 50px"><rich:message for="txt_type"></rich:message></td>
					</tr>
					<tr>
						<td><h:outputText value="From Date:" /></td>
						<td><rich:calendar id="From_dt" onchange="changeFromDate();" required="true" requiredMessage="Enter From Date"
								value="#{holidayMasterMB.model.holidayInfo.fromDate}"
								enableManualInput="true">
							</rich:calendar> 

						</td>
						 <td style="width: 50px"><rich:message for="From_dt"></rich:message></td>
					</tr>
					<tr>

						<td><h:outputText value="To Date:" /></td>
						<td><rich:calendar id="to_date" required="true" requiredMessage="Enter To Date"
								value="#{holidayMasterMB.model.holidayInfo.toDate}"  onchange="checkDate();" 
								enableManualInput="true" >
							</rich:calendar></td>


                      <td style="width: 50px"><rich:message for="to_date"></rich:message></td>

					</tr>
					<tr>
						<td style="width: 100px"><h:outputText value="IS Active:" /></td>
						<td style="width: 50px"><h:selectBooleanCheckbox id="is_active"
								value="#{holidayMasterMB.model.holidayInfo.active}" size="25" /></td>
                          <td style="width: 50px"></td>
					</tr>
					<tr>

						<td style="width: 100px"><h:outputText value="Remarks:" /></td>
						<td style="width: 50px"><h:inputTextarea id="txt_area"
								styleClass="inputText" onblur="maxTextAreaCharacter(this);"
								value="#{holidayMasterMB.model.holidayInfo.remarks}" rows="2"
								cols="40" /></td>
				      <td style="width: 50px"></td>
					</tr>
					</tbody>
                  </table>
                  
					</fieldset>
						<div style="width:100%;" align="right">
						<h:button value="Reset"
								styleClass="green" style="height:30px; width:60px;" />&nbsp;
							<a4j:commandButton value="Add" styleClass="addButton"  oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();"
								style="height:30px; width:60px;" execute="@form" render="@form"
								actionListener="#{holidayMasterMB.add}" />&nbsp;
							<a4j:commandButton onclick="disableAdd();" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();"
								value="Update" styleClass="updateButton" render="@form"
								style="height:30px; width:60px;" execute="@form"
								actionListener="#{holidayMasterMB.updateHoliday}" />

					
                      </div>
			
			
                    
	<fieldset class="fieldset">

			<legend class="legend">
				<font color="orange" size="4">Holiday Details</font>
			</legend>
			
			
			<table id="weekOff" class="table" cellpadding="10" style="width: 75%"
				align="center">
				
				
				<tr>
        <td>
   	    <label>Holiday Name: </label>
   	   </td> <td>
   	    	<h:inputText value="#{holidayMasterMB.model.searchKey}" id="searchKey" styleClass="inputText" />
   		</td>
   		<td>     
   		<a4j:commandButton action="#{holidayMasterMB.Display}" value="Search"  style="height:30px; width:60px;" render="table" execute="searchKey"  id="btnSearch"  />
        </td>   
   </tr>
				<tr>

					<td colspan="2">
						<div align="right" id="Holidaymaster"
							style="float: left; right: 50px; top: 200px; height: 100%; width: 650px; margin-left: 20px;">

							<rich:dataTable var="record" id="table"   value="#{holidayMasterMB.model.holidayList}" noDataLabel="No Emplooyee is Found"
								style="width:100%;height:100%;text-align:center"
								styleClass="HolidayTable" rows="5"
								headerClass="HolidayTableHeader"
								onrowmousemove="this.style.backgroundColor='#FFEBDA'"
								onrowmouseout="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
								rowClasses="odd-row,even-row">
								<rich:column width="15%">
									<f:facet name="header">
										<h:outputText value="Year"></h:outputText>
									</f:facet>
								<h:outputText value="#{record.fromDate}" >
									  <f:convertDateTime pattern="yyyy" />
								</h:outputText>



								</rich:column>

								<rich:column width="15%">
									<f:facet name="header">
										<h:outputText value="Holiday Name"></h:outputText>
									</f:facet>
								   <h:outputText value="#{record.name}"></h:outputText>


								</rich:column>

								<rich:column width="15%">
									<f:facet name="header">
										<h:outputText value="From Date" ></h:outputText>
									</f:facet>
									<h:outputText value="#{record.fromDate}" >
										<f:convertDateTime pattern="dd-MM-yyyy" locale="en_US"/>
										 
									</h:outputText>


								</rich:column>
								<rich:column width="15%">
									<f:facet name="header">
										<h:outputText value="To Date"></h:outputText>
									</f:facet> 
									<h:outputText value="#{record.toDate}" >
									  <f:convertDateTime pattern="dd-MM-yyyy" locale="en_US"/>
										
									</h:outputText>
								


								</rich:column>
								
								
								<rich:column width="15%">
									<f:facet name="header">
										<h:outputText value="Action"></h:outputText>
									</f:facet>
                               <a4j:commandLink onclick="disableUpdate();" render="txt_name,txt_area,is_active,to_date,From_dt,txt_type,description" action="#{holidayMasterMB.selectHoliday}" execute="@this" id="edit">
                                   <f:setPropertyActionListener target="#{holidayMasterMB.model.holidayInfo}" value="#{record}"></f:setPropertyActionListener>
                                 <h:graphicImage      value="/resources/images/editrecord.gif"/>
                              </a4j:commandLink>
								</rich:column>  
								
								




								<f:facet name="footer">
									<rich:dataScroller id="scroller" for="table" maxPages="10"    
										renderIfSinglePage="false" boundaryControls="hide"
										fastControls="hide" />
								</f:facet>
  
							</rich:dataTable>     
						</div>  

					</td>
				</tr>
			</table>
		</fieldset>  
		           <script>
		           
		             $( document ).ready(function() {
                           $(".updateButton").prop('disabled', true); 
                         });
		                   function disableUpdate(){
			             
			                 $(".addButton").prop('disabled', true);
			                 $(".updateButton").prop('disabled', false);
		                   }
			                  function disableAdd(){
						      $(".addButton").prop('disabled', false);
				              $(".updateButton").prop('disabled', true); 
		                    }
			                  
			                function checkDate() {
			                
			                  var iDate=document.getElementById("centreContentForm:From_dtInputDate").value;
			              	   
			            	  var issueDate=new Date(iDate);
			            	
			            	  var expiryDate=new Date(document.getElementById("centreContentForm:to_dateInputDate").value);
			            	 
			            	  if(issueDate >expiryDate || iDate.length==0)
			                     {
			                      document.getElementById("centreContentForm:to_dateInputDate").value="";
			              	      alert("To Date Should be greater than From Date");
			              	      return false;
			              	     }
			                  
			                
			                   return true;
			               
			           }
			                
			         function changeFromDate()
			            {
			        	    document.getElementById("centreContentForm:to_dateInputDate").value="";
			           	   
			            }
			                   
		</script> 
	</ui:composition>
  
</h:body>

</html>