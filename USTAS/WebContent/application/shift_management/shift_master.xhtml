<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>

<h:body>
	<ui:composition>
	
		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">Shift Creation</font>
			</legend>
			<table id="shift_Creation" class="table" cellpadding="10"
				style="width:100%" align="center">
				<tbody>
					<tr>
						<td style="width: 100px"><h:outputText value="Shift Name:" /></td>
						<td style="width: 50px"><h:inputText maxlength="60" styleClass="inputText" required="true" id="shift_name" requiredMessage="Enter Shift name"
								value="#{shiftMasterMB.model.shiftInfo.shiftName}" size="25" /></td>
					    <td style="width: 50px"><rich:message for="shift_name"/></td>		
						<td style="width: 50px"><h:outputText value="In Time:(hh:mm:ss)" /></td>
			  			<td style="width:200px"><h:panelGroup>
								<div align="left" style="float: left;">
									<rich:inputNumberSpinner
										value="#{shiftMasterMB.model.inTomeHr}"
										id="shiftStartTimeDetail1" required="true" minValue="0"
										maxValue="23" inputSize="2"  />
								</div>  
								<div style="float: left; margin-left: 9px">
									<rich:inputNumberSpinner
										value="#{shiftMasterMB.model.inTimeMin}"
										id="shiftStartTimeDetail2" required="true" minValue="0"
										maxValue="59" inputSize="2" />
								</div>
								<div style="float: left; margin-left: 10px">  
									<rich:inputNumberSpinner required="true"
										value="#{shiftMasterMB.model.inTimeSec}"
										id="shiftStartTimeDetail3" minValue="0" maxValue="59"
										inputSize="2" />
								</div>
							</h:panelGroup></td>
                            <td style="width: 50px"></td>	
					</tr>
					<tr>

						<td style="width: 100px"><h:outputText value="Out Time:(hh:mm:ss)" /></td>
						<td style="width: 50px"><h:panelGroup>
								<div align="left" style="float: left;">
									<rich:inputNumberSpinner required="true"
										value="#{shiftMasterMB.model.outTimeHr}"
										id="shiftEndTimeDetail1" minValue="0" maxValue="23"
										inputSize="2"  />
								</div>
								<div style="float: left; margin-left: 9px">
									<rich:inputNumberSpinner
										value="#{shiftMasterMB.model.outTimeMin}"
										id="shiftEndTimeDetail2" required="true" minValue="0"
										maxValue="59" inputSize="2"  />
								</div>
								<div style="float: left; margin-left: 10px">
									<rich:inputNumberSpinner required="true"
										value="#{shiftMasterMB.model.outTimeSec}"
										id="shiftEndTimeDetail3" minValue="0" maxValue="59"
										inputSize="2" />
								</div>
							</h:panelGroup></td>
						<td style="width: 100px"><h:outputText
								value="Late Coming Limit(Min):" /></td>
						<td style="width: 200px"><h:panelGroup>
								<div align="left" style="float: left;">
									<rich:inputNumberSpinner
										value="#{shiftMasterMB.model.shiftInfo.lateComingLimit}"
										id="shiftLateTimeDetail1" minValue="0" maxValue="60"
										inputSize="2" />
								</div>

							</h:panelGroup></td>

					</tr>

					<tr>

						<td style="width: 100px"><h:outputText
								value="Early Going Limit(Min):" /></td>
						<td style="width: 50px"><h:panelGroup>
								<div align="left" style="float: left;">
									<rich:inputNumberSpinner
										value="#{shiftMasterMB.model.shiftInfo.earlyGoingLimit}"
										id="shiftEarlyTimeDetail1" minValue="0" maxValue="60"
										inputSize="2" />
								</div>

							</h:panelGroup></td>

					</tr>
					<tr>

						<td style="width: 100px"><h:outputText value="Description:" /></td>
						<td style="width: 50px"><h:inputTextarea required="true" onkeyup="maxTextAreaCharacter(this);" requiredMessage="Enter Description"
								styleClass="inputText" id="shift_desc"
								value="#{shiftMasterMB.model.shiftInfo.shiftDesc}" rows="2"
								cols="20" /></td>
					 <td style="width: 100px"><rich:message for="shift_desc"/></td>		
					</tr>
					<tr>
					 <td style="width: 100px">Is Active :</td>
					 
					 <td style="width: 100px"><h:selectBooleanCheckbox  value="#{shiftMasterMB.model.shiftInfo.active}"/> </td>
					</tr>

				</tbody>
			</table>
		</fieldset>

		<fieldset class="fieldset">

			<legend class="legend">
				<font color="orange" size="4">Week OFF</font>
			</legend>
			<table id="weekOff" class="tableDetail" cellpadding="10" style="width: 75%"
				align="center">
				<tbody>
				 <tr><td  style="width: 10%">No of Week OFF</td>
				    <td  style="width: 10%"><h:inputText styleClass="inputText" onchange="validateOFF(this);" required="true" id="shift_off" requiredMessage="Enter Week Off" value="#{shiftMasterMB.model.shiftInfo.weekOfNo}" /></td>
				    <td style="width: 100px"><rich:message for="shift_off"/></td>		
				 </tr>
					<tr>
						<td style="width: 10%"></td>
						<td style="width: 10%">Monday</td>  
						<td style="width: 10%">Tuesday</td>
						<td style="width: 10%">Wednesday</td>  
						<td style="width: 10%">Thursday</td>
						<td style="width: 10%">Friday</td>
						<td style="width: 10%">Saturday</td>
						<td style="width: 10%">Sunday</td>  
					</tr>
					<tr>
						<td style="width: 10%">OFF</td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="monOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"  
								value="#{shiftMasterMB.model.monWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="tuesOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.tueWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="wedOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.wedWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="thursOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.thursWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="friOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.friWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="satOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.satWeekOff}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="sunOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.sunWeekOff}" /></td>
					</tr>

					<tr>
						<td style="width: 10%">Alternate OFF</td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="monAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.mondayAlternateOFF}" >
								</h:selectBooleanCheckbox></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="tuesAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.tueAlternateOFF}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="wedAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.wedAlternateOFF}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="thursAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.thursAlternateOFF}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="friAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.friAlternateOFF}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="satAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.satAlternateOFF}" /></td>
						<td style="width: 10%"><h:selectBooleanCheckbox id="sunAltOFF" styleClass="booleanCheckBox" onchange="checkAllOff(this);"
								value="#{shiftMasterMB.model.sunAlternateOFF}" /></td>
					</tr>



				</tbody>




			</table>
			<table class="table" cellpadding="10" style="width: 50%"
				align="center">
				<tr>
					<td>Allowed Over Times</td>
					<td><h:panelGroup>
							<div align="left" style="float: left;">
								<rich:inputNumberSpinner
									value="#{shiftMasterMB.model.overTimeHr}"
									id="shiftOverTimeDetail1" minValue="0" maxValue="4"
									inputSize="2" />
							</div>
							<div style="float: left; margin-left: 9px">
								<rich:inputNumberSpinner
									value="#{shiftMasterMB.model.overTimeMin}"
									id="shiftOverDetail2" minValue="0" maxValue="59" inputSize="2" />
							</div>
							<div style="float: left; margin-left: 10px">
								<rich:inputNumberSpinner
									value="#{shiftMasterMB.model.overTimeSec}"
									id="shiftOverDetail3" minValue="0" maxValue="59" inputSize="2" />
							</div>
						</h:panelGroup></td>
				</tr>
				
			</table>
		</fieldset>
		<br />
		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">Break details</font>
			</legend>
			<table id="breakDetails" class="table" cellpadding="10"
				style="width: 75%" align="center">
				<rich:dataTable value="#{shiftMasterMB.model.breakList}" 
					var="breakrecord" id="table"   
					style="width:70%;height:100%;text-align:center"
					styleClass="searchTable" headerClass="searchTableHeader"
					onrowmousemove="this.style.backgroundColor='#FFEBDA'"
					onrowmouseout="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
					rowClasses="odd-row,even-row">
					<rich:column width="15%">
						<f:facet name="header">
							<h:outputText value="Break Type"></h:outputText>
						</f:facet>
						<h:selectOneMenu style="width:100px" value="#{breakrecord.indexNo}" valueChangeListener="#{shiftMasterMB.breakChangeListener}" > 
							<f:selectItem itemLabel="Select " ></f:selectItem>
							<f:selectItems value="#{shiftMasterMB.model.breakSelectItemList}" ></f:selectItems>
                            
						   <a4j:ajax event="change" execute="table" render="table"  >    
						   </a4j:ajax>  
			           
						 	
						</h:selectOneMenu>  
					</rich:column>
					<rich:column width="10%">
						<f:facet name="header">
							<h:outputText value="Start Time"></h:outputText>
						</f:facet>
						<h:outputText value="#{breakrecord.startTime}">

						</h:outputText>
					</rich:column>

					<rich:column width="10%">
						<f:facet name="header">
							<h:outputText value="End Time"></h:outputText>
						</f:facet>
						<h:outputText value="#{breakrecord.endTime}" >

						</h:outputText>
					</rich:column>
					<rich:column width="10%">
						<f:facet name="header">
							<h:outputText value="Action"></h:outputText>
						</f:facet>
					    
						<a4j:commandLink action="#{shiftMasterMB.deleteBreak}"  execute="@this" title="Delete Break" render="table">
						      <h:graphicImage      value="/resources/images/close.gif" />
						      <f:setPropertyActionListener target="#{shiftMasterMB.model.breakInfo}" value="#{breakrecord}"></f:setPropertyActionListener>
						     
						</a4j:commandLink> 
					</rich:column>

				</rich:dataTable>

			</table>
			<div style="width: 70%" align="right">
				<a4j:commandButton value="Add More" execute="@this" render="table"
				 actionListener="#{shiftMasterMB.addMoreBreak}" style="Width:70px;height:30px"></a4j:commandButton>
			</div>
		</fieldset>
		<br />
		<div style="width: 100%" align="right">
			<h:button value="Clear" style="Width:70px;height:30px"></h:button>
			&nbsp;&nbsp;
			<a4j:commandButton execute="@form" value="Save"
				style="Width:70px;height:30px" styleClass="addButton" onclick="if(!validateShiftTime()) return false;"  
				render="@form" disabled="#{menuBean.mode ne 'addShift'}" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();" action="#{shiftMasterMB.addShift}"></a4j:commandButton>
			&nbsp;&nbsp;
			<a4j:commandButton value="Update" styleClass="updateButton" onclick="if(!validateShiftTime()) return false;" render="@form" disabled="#{menuBean.mode ne 'updateShift'}" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();" actionListener="#{shiftMasterMB.updateShift}" style="Width:70px;height:30px">
			  
			</a4j:commandButton>
		</div>
		<br />   
		<br />
		<br />  
		<script>
		

		
		  function checkAllOff(obj){
			   var off=document.getElementById("centreContentForm:shift_off").value;   
			   var count=0;
			   if(obj.checked){
		           $(".booleanCheckBox").each(function()
		       	      {  
     	        	    if($(this).prop('checked')==true) 
     	        	    	{
		        	          count++;
     	        	    	}
		       		  
		             if(count>off)  
			    	    {
			    	      alert("Please do not select More than number of week off");
			    	      $(this).prop('checked', false);
			    	      return false;
			    	    }
		       	     });
		           }
			   if(document.getElementById("centreContentForm:monOFF").checked==true)
				   document.getElementById("centreContentForm:monAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:tuesOFF").checked==true)
				   document.getElementById("centreContentForm:tuesAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:wedOFF").checked==true)
				   document.getElementById("centreContentForm:wedAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:thursOFF").checked==true)
				   document.getElementById("centreContentForm:thursAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:friOFF").checked==true)
				   document.getElementById("centreContentForm:friAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:satOFF").checked==true)
				   document.getElementById("centreContentForm:satAltOFF").checked=false;
			   if(document.getElementById("centreContentForm:sunOFF").checked==true)
				   document.getElementById("centreContentForm:sunAltOFF").checked=false;
		  }
		  
		  function validateOFF(obj)
		    {
			   var val=obj.value;
			  if(isNaN(obj.value))
				 {
				  alert("Please enter Number only");
				  obj.value="";
				 }
			  if(val>3)
				  {
				  alert("Week Off can not be greater than 3");
				  obj.value="";     
				  }
			   $(".booleanCheckBox").each(function(){   
				   $(this).prop('disabled', false); 
			   });
			   $(".booleanCheckBox").each(function(){   
				   $(this).prop('checked', false); 
			   }); 
			  
		    }
		  
		  function disableAdd(){
		      $(".addButton").prop('disabled', false);
              $(".updateButton").prop('disabled', true); 
           }
		  
		
		   
		  
		</script> 
	
	</ui:composition>
	
</h:body>
  
</html>
