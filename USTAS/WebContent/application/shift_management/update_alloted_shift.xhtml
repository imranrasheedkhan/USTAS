<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:a4j="http://richfaces.org/a4j"
	 xmlns:rich="http://richfaces.org/rich"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets">

<h:head></h:head>
   
<h:body>
	<ui:composition>  
		<fieldset class="fieldset">
			<legend class="legend">
				<font color="orange" size="4">View/Update Shift Allotment</font>
			</legend>
		<table id="emp_update_shiftAllot" class="table" cellpadding="10"
				style="width: 80%" align="center">
			<tr> 
   	      <td>Employee Id</td>
   	      <td>
   		    <h:inputText id="search_key" value="#{shiftAllotmentMB.shiftModel.searchKey}" styleClass="inputText">
   		       
   		 
   		     </h:inputText>
   		   </td>
   		   <td><a4j:commandButton  render="shift_table"  value="Search" execute="search_key" actionListener="#{shiftAllotmentMB.viewAllotedShift}"></a4j:commandButton> </td>
   		
   		</tr>

		</table>
	  		  <div align="right" id="update_shiftAllotment" style="float:left;right:50px;top:200px;height:100%; width:800px; margin-left:20px;">
			    <rich:dataTable
							value="#{shiftAllotmentMB.shiftModel.empAllotedList}" var="shiftRecord"
							id="shift_table" noDataLabel="No data is available"
							style="width:100%;height:100%;text-align:center"  
							styleClass="searchTable" rows="10"
							headerClass="searchTableHeader"
							onrowmousemove="this.style.backgroundColor='#FFEBDA'"
							onrowmouseout="this.style.backgroundColor='#{a4jSkin.rowBackgroundColor}'"
							rowClasses="odd-row,even-row">
							<rich:column width="15%">
								<f:facet name="header">
									<h:outputText value="Select"></h:outputText>
								</f:facet>
								
								<h:selectBooleanCheckbox value="#{shiftRecord.shiftAlloted}" id="selectEmp" styleClass="booleanCheckBox" >
									   <a4j:ajax event="change" render="selectEmp"  ></a4j:ajax>  
								</h:selectBooleanCheckbox> 
							</rich:column>
  
							<rich:column width="15%">
								<f:facet name="header">
									<h:outputText value="Employee ID"></h:outputText>
								</f:facet>
								<h:outputText value="#{shiftRecord.empInfo.empNo}"></h:outputText>
							</rich:column>
							<rich:column width="15%">
								<f:facet name="header">
									<h:outputText value="Name"></h:outputText>
								</f:facet>
								<h:outputText
									value="#{shiftRecord.empInfo.firstName} #{shiftRecord.empInfo.lastName}"></h:outputText>
							</rich:column>

						
							
							<rich:column width="15%">
								<f:facet name="header">
									<h:outputText value="From Date"></h:outputText>
								</f:facet>
								<rich:calendar id="FROM_DT"
									value="#{shiftRecord.fromDate}">
							</rich:calendar>
                           </rich:column>
                            <rich:column width="15%">
								<f:facet name="header">
									<h:outputText value="To Date "></h:outputText>
								</f:facet>
								<rich:calendar id="TO_DATE" 
									value="#{shiftRecord.toDate}"> 
							    </rich:calendar>
                           </rich:column>
                           
                           	<rich:column width="30%">
								<f:facet name="header">
									<h:outputText value="Shift"></h:outputText>
								</f:facet>


								<h:selectOneMenu id="shift_number"
									 value="#{shiftRecord.tempShiftIndex}" >

									<f:selectItems value="#{shiftAllotmentMB.shiftModel.shiftItemList}" id="shift_list"></f:selectItems>
								    <a4j:ajax event="change" render="shift_number"></a4j:ajax> 
								</h:selectOneMenu>
  


							</rich:column>
                           
							<f:facet name="footer">
								<rich:dataScroller for="shift_table" execute="shift_table"
									maxPages="10" renderIfSinglePage="false"
									boundaryControls="hide" fastControls="hide">
								</rich:dataScroller>
							</f:facet>

 
						</rich:dataTable>  
			  
			  </div>   
				</fieldset>
				 <br/>
				 <div style="width:100%" align="right"> 
             <h:button value="Clear" style="Width:70px;height:30px"></h:button>
             &nbsp; 
           <a4j:commandButton value="Update" onclick="if(!selectCheckBox()) return false;" oncomplete="if(#{!facesContext.validationFailed})#{rich:component('confirmation')}.show();" 
              execute="@form" actionListener="#{shiftAllotmentMB.updateShiftAllotment}" style="Width:70px;height:30px"></a4j:commandButton>
             &nbsp;
         </div>  
		<br />
		<br />     
		<br /> 
		    <script type="text/javascript">
            function checkDate() {
        	  var iDate=document.getElementById("centreContentForm:FROM_DTInputDate").value;
        	  alert("Hi");
    	      var issueDate=new Date(iDate);
    	      var expiryDate=new Date(document.getElementById("centreContentForm:TO_DATEInputDate").value);
            if(issueDate >expiryDate || iDate.length==0)
                {
               document.getElementById("centreContentForm:TO_DATEInputDate").value="";  
      	       alert("To Date Should be greater than From Date");
      	       return false;
      	       }
                return true;
       
            }  
        </script>
           
				</ui:composition>
		  </h:body>
	    </html>